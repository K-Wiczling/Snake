(function(){"use strict";var t={5379:function(t,e,s){var i=s(9242),o=s(3396);const r={ref:"canvasHolder",id:"canvasHolder"};function n(t,e,s,i,n,a){const h=(0,o.up)("ScoreDispaly"),c=(0,o.up)("gameModal");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",r,[(0,o.Wm)(h,{score:t.gm.score.score,lvl:t.gm.score.scorePerEat},null,8,["score","lvl"])],512),t.gameRun?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(c,{key:0,onStartGame:e[0]||(e[0]=e=>t.startGame()),message:t.gm.message},null,8,["message"]))],64)}var a=s(7327);s(7658),s(541);class h{constructor(t,e){(0,a.Z)(this,"x",void 0),(0,a.Z)(this,"y",void 0),this.x=t,this.y=e}isEquel(t){return this.x===t.x&&this.y===t.y}addTo(t){this.x+=t.x,this.y+=t.y}changePoint(t,e){this.x=t,this.y=e}}class c{constructor(t){(0,a.Z)(this,"body",[]),(0,a.Z)(this,"currentDirection","left"),(0,a.Z)(this,"gameSize",40),(0,a.Z)(this,"isSnakeAlive",!1),(0,a.Z)(this,"toGrow",!1),this.gameSize=t,this.setup()}setup(){this.body=[],this.body.push(new h(20,20)),this.body.push(new h(21,20)),this.body.push(new h(22,20)),this.body.push(new h(23,20)),this.currentDirection="left"}eat(){const t=new h(this.body[0].x,this.body[0].y);t.addTo(this.createDirection()),this.body.unshift(t),this.toGrow=!1}hungry(){this.toGrow=!0}changeDirection(t){"left"===t&&"right"===this.currentDirection||"right"===t&&"left"===this.currentDirection||"top"===t&&"bottom"===this.currentDirection||"bottom"===t&&"top"===this.currentDirection||(this.currentDirection=t)}checkForWalls(){(this.body[0].x<0||this.body[0].x>this.gameSize||this.body[0].y>this.gameSize||this.body[0].y<0)&&(this.isSnakeAlive=!1)}checkForTail(){for(let t=1;t<=this.body.length-1;t++)this.body[0].isEquel(this.body[t])&&(this.isSnakeAlive=!1)}update(){this.toGrow?this.eat():this.move(),this.checkForTail(),this.checkForWalls()}move(){let t=this.createDirection();const e=new h(this.body[0].x,this.body[0].y);e.addTo(t);for(let s=this.body.length-1;s<=1;s--)this.body[s]=Object.assign(this.body[s-1]);this.body.pop(),this.body.unshift(e)}createDirection(){let t=new h(0,0);switch(this.currentDirection){case"top":t.changePoint(0,-1);break;case"bottom":t.changePoint(0,1);break;case"right":t.changePoint(1,0);break;case"left":t.changePoint(-1,0);break}return t}}class l{constructor(t,e,s){(0,a.Z)(this,"red",void 0),(0,a.Z)(this,"green",void 0),(0,a.Z)(this,"blue",void 0),this.checkNumbers(t),this.checkNumbers(e),this.checkNumbers(s),this.red=t,this.green=e,this.blue=s}checkNumbers(t){t>255&&(t=255),t<0&&(t=0)}getColorHash(){let t=this.red.toString(16),e=this.green.toString(16),s=this.blue.toString(16);this.red%16===0&&(t+=t),this.green%16===0&&(e+=e),this.blue%16===0&&(s+=s);let i=`#${t}${e}${s}`;return i}}var d=l;class u{constructor(t,e){(0,a.Z)(this,"canvas",void 0),(0,a.Z)(this,"canvasContext",void 0),(0,a.Z)(this,"canvasHolder",document.createElement("div")),(0,a.Z)(this,"resize",void 0),(0,a.Z)(this,"width",void 0),(0,a.Z)(this,"height",void 0),(0,a.Z)(this,"gridSize",15),(0,a.Z)(this,"gameSize",40),(0,a.Z)(this,"colorBackground",new d(0,0,0)),(0,a.Z)(this,"colorMain",new d(30,225,0)),this.resize=addEventListener("resize",(()=>{this.calculateCanvas(this.canvas)})),this.gameSize=e,this.setupCanvas(t),this.calculateCanvas()}drawUpdate(t,e){this.clearCanvas(),this.useColorMain(),this.drawSquare(e);for(const s of t)this.drawSquare(s)}clearCanvas(){this.useColorBakcground(),this.canvasContext.fillRect(0,0,this.canvas.width,this.canvas.height)}useColorBakcground(){this.canvasContext.fillStyle=this.colorBackground.getColorHash()}useColorMain(){this.canvasContext.fillStyle=this.colorMain.getColorHash(),this.canvasContext.fillStyle="#00ff00"}drawSquare(t){const e=this.gridSize;this.canvasContext.fillRect(t.x*e,t.y*e,e,e)}calculateCanvas(t){null!==this.canvas&&void 0!==this.canvas||(this.canvas=t);const e=this.canvasHolder.clientWidth,s=this.canvasHolder.clientHeight;this.gridSize=e/s<1?Math.floor(e/this.gameSize):Math.floor(s/this.gameSize);let i=this.gridSize*this.gameSize-1;this.canvas.height=i,this.canvas.width=i}setupCanvas(t){this.canvas=document.createElement("canvas"),this.canvasContext=this.canvas.getContext("2d"),this.canvasHolder=t,this.createCanvas()}setCanvasColors(t,e){this.colorMain=t,this.colorBackground=e}createCanvas(){this.canvasHolder.appendChild(this.canvas)}}var v=u;class g{constructor(){(0,a.Z)(this,"currentDirection","left"),(0,a.Z)(this,"keysPress",void 0),(0,a.Z)(this,"touchStart",void 0),(0,a.Z)(this,"touchEnd",void 0),(0,a.Z)(this,"StartTouchPosX",null),(0,a.Z)(this,"StartTouchPosY",null),(0,a.Z)(this,"leftEvent",new CustomEvent("direction",{detail:{dir:"left"}})),(0,a.Z)(this,"rightEvent",new CustomEvent("direction",{detail:{dir:"right"}})),(0,a.Z)(this,"topEvent",new CustomEvent("direction",{detail:{dir:"top"}})),(0,a.Z)(this,"bottomEvent",new CustomEvent("direction",{detail:{dir:"bottom"}})),this.init()}init(){this.keysPress=addEventListener("keyup",(t=>{this.checkKeys(t.code)})),this.touchStart=addEventListener("touchstart",(t=>{this.checkSwipeStart(t)})),this.touchEnd=addEventListener("touchend",(t=>{this.checkSwipeEnd(t)}))}left(){dispatchEvent(this.leftEvent)}right(){dispatchEvent(this.rightEvent)}top(){dispatchEvent(this.topEvent)}bottom(){dispatchEvent(this.bottomEvent)}checkSwipeStart(t){this.StartTouchPosX=t.touches[0].clientX,this.StartTouchPosY=t.touches[0].clientY}checkSwipeEnd(t){const e=t.changedTouches[0].clientX,s=t.changedTouches[0].clientY;this.calcSwipeDirection(e-this.StartTouchPosX,s-this.StartTouchPosY)}calcSwipeDirection(t,e){let s=Math.abs(t),i=Math.abs(e);s>=i?t>0?this.right():this.left():e>0?this.bottom():this.top()}checkKeys(t){switch(t){case"ArrowUp":this.top();break;case"ArrowDown":this.bottom();break;case"ArrowRight":this.right();break;case"ArroeLeft":this.left();break;default:this.left();break}}}var m=g;class p{constructor(t){(0,a.Z)(this,"position",new h(15,20)),(0,a.Z)(this,"range",void 0),this.init(t)}init(t){this.range=t}generatePosition(){let t=Math.floor(Math.random()*(this.range-1)),e=Math.floor(Math.random()*(this.range-1));this.position.changePoint(t,e)}}class f{constructor(){(0,a.Z)(this,"score",0),(0,a.Z)(this,"levelScore",0),(0,a.Z)(this,"scorePerEat",1)}addPoints(){if(0===this.score)return this.score=1,void(this.levelScore=1);this.score+=this.scorePerEat,this.levelScore+=this.scorePerEat,this.levelUp()}reset(){this.score=0,this.levelScore=0,this.scorePerEat=1}levelUp(){this.levelScore>=this.getNextPointToLevelUp(this.scorePerEat+4)&&this.scorePerEat<10&&(this.scorePerEat++,this.levelScore=0)}getNextPointToLevelUp(t){if(0===t||1===t)return t;let e=0,s=0,i=1;for(let o=1;o<t;o++)e=s+i,s=i,i=e;return e}}var b=f;class y{constructor(){(0,a.Z)(this,"snake",void 0),(0,a.Z)(this,"food",void 0),(0,a.Z)(this,"canvas",void 0),(0,a.Z)(this,"controls",void 0),(0,a.Z)(this,"score",new b),(0,a.Z)(this,"updateing",void 0),(0,a.Z)(this,"startRefreshTime",250),(0,a.Z)(this,"speedMultiplayer",20),(0,a.Z)(this,"minRefreshTimer",80),(0,a.Z)(this,"controlsListener",void 0),(0,a.Z)(this,"gameSize",40),(0,a.Z)(this,"message","Hallo :)")}init(t){this.canvas=new v(t,this.gameSize),this.controls=new m,this.snake=new c(this.gameSize),this.food=new p(this.gameSize),this.score=new b,this.controlsListener=addEventListener("direction",(t=>{const e=t;this.snake.changeDirection(e.detail.dir)})),this.setup()}setup(){clearInterval(this.updateing),this.snake.setup(),this.food.generatePosition(),this.score.reset()}gameLoop(){this.snake.isSnakeAlive?(this.snake.update(),this.canvas.drawUpdate(this.snake.body,this.food.position),this.snake.body[0].isEquel(this.food.position)&&(this.score.addPoints(),this.food.generatePosition(),this.snake.hungry()),this.updateing=setTimeout((()=>{this.gameLoop()}),this.speedUpdate())):this.endGame()}start(){this.snake.isSnakeAlive=!0,this.setup(),this.gameLoop(),dispatchEvent(new CustomEvent("startGame"))}endGame(){clearTimeout(this.updateing),this.message=`You die, Your score is: ${this.score.score}`,dispatchEvent(new CustomEvent("endGame"))}speedUpdate(){return this.startRefreshTime-15*this.score.scorePerEat>this.minRefreshTimer?this.startRefreshTime-this.score.scorePerEat*this.speedMultiplayer:this.minRefreshTimer}}var w=s(7139);const S={id:"score-dispaly"};function k(t,e,s,i,r,n){return(0,o.wg)(),(0,o.iD)("div",S,[(0,o._)("span",null,"Score: "+(0,w.zw)(t.score),1)])}var Z=(0,o.aZ)({name:"scoreDisplay",components:{},props:{score:Number,lvl:Number},methods:{}}),E=s(89);const C=(0,E.Z)(Z,[["render",k]]);var P=C;const x={id:"game-modal"};function T(t,e,s,i,r,n){return(0,o.wg)(),(0,o.iD)("div",x,[(0,o._)("p",null,(0,w.zw)(t.message),1),(0,o._)("button",{onClick:e[0]||(e[0]=(...e)=>t.startGame&&t.startGame(...e))},"Start Game")])}var D=(0,o.aZ)({name:"gameModal",props:{message:String},methods:{startGame(){this.$emit("startGame")}}});const z=(0,E.Z)(D,[["render",T]]);var M=z,G=(0,o.aZ)({name:"App",components:{ScoreDispaly:P,gameModal:M},data(){return{gm:new y,gameRun:!1}},methods:{startGame(){this.gm.start()}},mounted(){this.gm.init(this.$refs.canvasHolder);addEventListener("endGame",(()=>{this.gameRun=!1})),addEventListener("startGame",(()=>{this.gameRun=!0}))}});const L=(0,E.Z)(G,[["render",n]]);var H=L;(0,i.ri)(H).mount("#app")}},e={};function s(i){var o=e[i];if(void 0!==o)return o.exports;var r=e[i]={exports:{}};return t[i](r,r.exports,s),r.exports}s.m=t,function(){var t=[];s.O=function(e,i,o,r){if(!i){var n=1/0;for(l=0;l<t.length;l++){i=t[l][0],o=t[l][1],r=t[l][2];for(var a=!0,h=0;h<i.length;h++)(!1&r||n>=r)&&Object.keys(s.O).every((function(t){return s.O[t](i[h])}))?i.splice(h--,1):(a=!1,r<n&&(n=r));if(a){t.splice(l--,1);var c=o();void 0!==c&&(e=c)}}return e}r=r||0;for(var l=t.length;l>0&&t[l-1][2]>r;l--)t[l]=t[l-1];t[l]=[i,o,r]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,i){var o,r,n=i[0],a=i[1],h=i[2],c=0;if(n.some((function(e){return 0!==t[e]}))){for(o in a)s.o(a,o)&&(s.m[o]=a[o]);if(h)var l=h(s)}for(e&&e(i);c<n.length;c++)r=n[c],s.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return s.O(l)},i=self["webpackChunksnake_vue"]=self["webpackChunksnake_vue"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998],(function(){return s(5379)}));i=s.O(i)})();
//# sourceMappingURL=app.4f91ca98.js.map